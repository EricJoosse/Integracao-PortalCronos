
Email/Skype padrão: veja email automatizado no arquivo IntegracaoFornecedorCompleta.java 

OBSERVAÇÕES: 
   1. EDITAR O MANUAL EM ANEXO: SUBSTITUIR "WINTHOR/APS/ETC"  E  "ORACLE/FIREBIRD/ETC" 
      E "AnyDesk/Team Viewer" E "ws-jrembalagem" E "boa tarde/dia"
   2. SÓ COPIAR LEAO DEPENDENDO DO HORÁRIO E LOCAl (CASA / APPLY):
   3. PREPARAR O EMAIL NA HORA QUE A ALERTA AUTOMÁTICA CHEGAR, PORÉM ESPERAR MAIS 15 MINUTOS 
      PARA A SEGUNDA TENTATIVA DE OFERTAMENTO POIS É NORMAL QUE DE VEZ EM QUANDO O SERVIDOR 
      ESTÁ INDISPONÍVEL ALGUNS MINUTOS. 
      DE TODO JEITO NA HORA DE ENVIAR O EMAIL, VERIFICAR NOVAMENTE SE O SERVIÇO JÁ TINHA VOLTADO 
      A FUNCIONAR.      
   4. NÃO ADICIONAR NO MANUAL PARA A TI VERIFICAR OS ARQUIVOS DE LOG DE ERRO 
      NO DIR C:\TEMP\PORTAL CRONOS\XML\ POIS ELES VÃO OLHAR EM ARQUIVOS ANTIGOS 
      QUE NÃO TEM NADA A VER COM O PROBLEMA!   
   5. SE A PARADA COMEÇÕU NO FINAL DA SEMANA, SEGUNDA-FEIRA ESPERAR ATÉ 9:00 - 10:00 
      PARA VER SE O TI JÁ RESOLVE SOZINHO QUE FALTOU ENERGIA OU INTERNET OU OUTRA COISA.  
           





Assunto: JR Embalagem -  Problema no servidor de hospedagem da integração PCronos/WinThor
Para: jrembalagem.ti@gmail.com
Ivan, bom dia!
 
  ontem (19/02/2018) de 11:00 até 21:00 o serviço das ofertas automáticas no servidor da JR Embalagem 
estava comunicando com o Portal Cronos, enviando arquivos REC_*.xml, porém não estava enviando arquivos OFE_*.xml, 
então não estava ofertando. Precisamos descobrir a causa para evitar que acontece novamente.   

1. Favor verificar no diretório C:\Arquivos de Programas PC\Integração Fornecedor - Portal Cronos\ 
    se existir um dos seguintes tipos de arquivos de log com data no período acima: 
     - hs_err_pidxxxx.mdmp?
     - hs_err_pidxxxx.log?
     - replay_pidxxxx.log?
     
2. Favor verificar no arquivo de log de Windows se aconteceram alertas que a memória RAM estava cheia neste período 
    (Painel de Controle > Ferramentas Administrativas > Visualizar Eventos > Logs do Windows > Aplicativo)
    No caso, tem como descobrir o percentual de memória RAM ocupada exatamente?
         
3. Estava rodando um scan de anti-virus neste período?
 
4. Favor enviar para mim o maior arquivo Debugxxxxx.log com data dentro deste período que se encontra 
    no outro diretório  C:\temp\PortalCronos\XML\.
    Estou precisando disso para achar uma forma para automatizar o re-processamento das cotações pendentes 
    após a liberação da memória RAM, ou após a volta de uma queda do banco Oracle. 
   
    
Observação: O servidor de hospedagem do serviço das ofertas automáticas 
             é o servidor no qual existe um diretório C:\Arquivos de Programas PC\ 
             
Atc,
Eric 




==========================================================================================================
DIVERSOS: 

Skype:
Felipe, bom dia! Vocês têm um servidor Linux no Marítimos Pescados? 
Se quiser, posso instalar a integração WinThor/Portal Cronos no servidor Linux, 
pois com o servidor atual, desde muito tempo, o Portal Cronos nunca mais está recebendo ofertas automáticas do Marítimos Pescados...

Skype:
Felipe, boa tarde! Você não prefere que vou instalar a integração WinThor/Portal Cronos em outro servidor de vocês?
Pois com o servidor atual, desde muito tempo, o Portal Cronos nunca mais está recebendo ofertas automáticas do Marítimos Pescados...

Felipe, hoje estou disponível, aproveita! Você tem outro servidor para instalar a integração WinThor/PCronos? 

Isso resolveu o problema. O WinThor voltou a enviar as ofertas automaticamente para o Portal Cronos

Vou desconectar o Team Viewer, obrigado

NO CASO DO ANYDESK:
Tem como definir uma senha de acesso no AnyDesk? A grande vantagem disso é que não vou precisar aguardar seu clique "OK" toda vez que o AnyDesk cair.
Isso é muito importante para evitar ainda mais atraso e ainda mais perda de oportunidades de vendas pela Prolac   
  
  	CASO QUE NÂO:
	Então hoje vou precisar de sua confirmação diversas vezes! A Anydesk caiu neste momento!

Email:
PARA GANHAR TEMPO:
Leão, Marcelo,
 
  configurei as 2 versões de Java em paralelo e executei o serviço de ofertamento automático uma vez, com sucesso.
Apenas falta resolver um problema que o serviço ainda não está rodando de 15 a 15 minutos.
Isso vou resolver depois do almoço com mais calma, pois no momento não tem mais cotações pendentes e a próxima cotação
nova que será lançada no futuro vai vencer daqui há pelo menos 5 horas.
Apenas tem alguns produtos com problema, isso é com vocês. Favor resolver ou encaminhar para o gerente de vendas:
O Código de Produto 103.746 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 119381 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 118533 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 116970 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 117052 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 108271 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 119113 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 119754 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
O Código de Produto 101488 do Fornecedor, informado na tela De-Para de Produtos no Portal Cronos, não existe no sistema WinThor do fornecedor Comercial Prolac.
 
Atc,
Eric
==========================================================================================================
NO CASO DE UMA PARADA POR CAUSA DE ATUALIZAÇÃO JAVA:

Skype:
Java foi atualizado para qual sistema/programa exatamente?
 
Quando você desocupar o servidor, me avise
 
Email:
Assunto: Re: Migração Java
Marcelo,
  
  O WinThor voltou a enviar as ofertas automaticamente para o Portal Cronos 
  
  
Marcelo,
 
   estou adaptando nosso serviço de integração WinThor/PCronos para a versão super-nova de Java que você tinha instalado ontem de repente.
Previsão: segunda-feira ou terça-feira.
Então favor avisar os vendedores para ficar ofertando manualmente durante alguns dias.
 
Na próxima vez favor me avisar da próxima migração de Java com alguns dias de antecedência!
 
Outra opção seria instalar 2 versões diferentes de Java em paralelo, uma versão para o WinThor, e outra versão para o Portal Cronos,
porém isso tem um risco pequeno que o WinThor vai parar de funcionar para todos os usuários. Você quer correr este risco? 
Esta opção também não é tão fácil e deveria ser feito com calma para minimizar os riscos, então mesmo se você escolher esta opção mais riscado, a previsão vai ser segunda-feira também,
 
Atc,  
Eric


Marcelo, 
  
   a migração de Java foi concluída e o serviço de integração voltou a ofertar automaticamente 
a cada 15 minutos. 
Pode fechar o AnyDesk,
   
Atc,
Eric
 
==========================================================================================================
Scripts:

SELECT  *
  FROM [PCronos_Producao].[dbo].[Integracao_Cotacao_Fornecedor]
  where id_fornecedor_fornec = 
order by dt_envio_cotacao_icotfor desc


-- Verificar se pelo menos os usuários estão ofertando manualmente: 

update [PCronos_Producao].[dbo].[Usuario_Sistema]  
    set id_fornecedor_fornec = 
  where cd_usuario_sistema_ususis = 'ericcoringa'


-- e em seguida conectar no Portal Cronos como ericcoringa

-- Acompanhar se já está resolvido:

exec dbo.monitorarIntegracaoFornecedores @incremental_15min = 0


-- Se precisar, re-processar cotações com 3 tentativas:

delete
  FROM [PCronos_Producao].[dbo].[Integracao_Cotacao_Fornecedor]
  where id_cotacao_cot in ()  -- Copiar todos os id´s de uma vez de 
                              -- "exec dbo.monitorarIntegracaoFornecedores @incremental_15min = 0"
                              -- e adicionar vírgulas
  and id_fornecedor_fornec = 


-- Verificação de cadastros de clientes e produtos: 

select distinct ds_ocorrencia_logeint
  from dbo.Log_Erro_Integracao
 where id_fornecedor_fornec = 
   and dt_hr_ocorrencia_logeint > DATEADD("DAY", -7, getdate())
   and isnull(ds_ocorrencia_logeint, '') not like '%está fora dos padrões do mercado.'


